{"id":"reincheck-048","title":"Refactor: Remove redundant isinstance checks in AgentConfig","description":"AgentConfig.__post_init__ has unnecessary isinstance() checks that always return True:\n- Lines 42, 44, 46, 48, 51, 55 check if str fields are isinstance(str) \n- Dataclasses already enforce these types\n- Config.__post_init__ has similar issue (line 76, 79)\n- basedpyright reports: 'Unnecessary isinstance call; str is always an instance of str'\n\nSimple cleanup removes ~12 lines of dead code, makes validation clearer.","status":"closed","priority":3,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-05T12:12:32.957758142+01:00","created_by":"Megatherium","updated_at":"2026-02-05T12:34:38.859680642+01:00","closed_at":"2026-02-05T12:34:38.859680642+01:00","close_reason":"Removed redundant isinstance checks from AgentConfig.__post_init__ (lines 42-56) - simplified validation to only check for empty strings while maintaining all validation logic. Basedpyright warnings eliminated."}
{"id":"reincheck-06t","title":"Fix codex agent install/upgrade commands","description":"The codex agent's install and upgrade commands use incorrect mise syntax. Changed from 'mise use -g npm:@openai/codex' to 'mise use -g codex' and 'mise upgrade codex@latest'. This matches the correct mise tool usage.","status":"closed","priority":3,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-05T02:06:40.320835972+01:00","created_by":"Megatherium","updated_at":"2026-02-05T02:07:04.193759291+01:00","closed_at":"2026-02-05T02:07:04.193759291+01:00","close_reason":"Fixed codex agent commands to use correct mise syntax"}
{"id":"reincheck-0iv","title":"Clean up test type annotations and warnings","description":"Tests have 168 type warnings and 3 errors from basedpyright. Most are intentional (testing invalid inputs), but can be cleaned up with # type: ignore comments or better type hints. Low priority as tests pass and warnings are in test code only.","status":"open","priority":4,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-05T02:15:32.701821814+01:00","created_by":"Megatherium","updated_at":"2026-02-05T02:15:32.701821814+01:00"}
{"id":"reincheck-1hp","title":"Add unit tests for core functionality","description":"Critical: Zero test coverage for a tool that:\n- Executes external commands\n- Manages YAML configuration\n- Handles version comparisons\n- Makes network requests\n\nPriority test areas:\n1. load_config/save_config with valid/invalid YAML\n2. compare_versions() with various version formats\n3. extract_version_number() edge cases\n4. Error handling in run_command_async\n5. get_npm_release_info/get_pypi_release_info parsing\n\nShould set up pytest with mock for subprocess calls to avoid running actual commands.","status":"closed","priority":0,"issue_type":"feature","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-04T19:01:41.843257666+01:00","created_by":"Megatherium","updated_at":"2026-02-04T23:25:08.083883387+01:00","closed_at":"2026-02-04T23:25:08.083883387+01:00","close_reason":"Added 41/51 unit tests (80% success). Core functionality fully tested. 10 integration-style tests remaining due to complex Path mocking needs."}
{"id":"reincheck-7uk","title":"Fix remaining unit tests for load_config/save_config","description":"10 tests remaining failing due to complex Path mocking: load_config/save_config error handling, and some get_npm_release_info/get_pypi_release_info edge cases. The core functionality works, but these integration-style tests need better mocking strategies.","status":"closed","priority":2,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-04T23:24:45.26416194+01:00","created_by":"Megatherium","updated_at":"2026-02-05T02:05:23.933002734+01:00","closed_at":"2026-02-05T02:05:23.933002734+01:00","close_reason":"Fixed all 11 failing tests by refactoring load_config/save_config to accept optional config_path parameter for better testability, and fixing mock paths in npm/pypi tests"}
{"id":"reincheck-9xs","title":"Code review: Add comprehensive error handling and remove bare except clauses","description":"Critical code safety issues:\n1. Multiple bare except: clauses in __init__.py (lines 187, 250, 270, 323) catch all exceptions including SystemExit/KeyboardInterrupt\n2. No error handling for YAML write operations in save_config()\n3. No validation of agent config loaded from YAML\n4. Potential command injection via asyncio.create_subprocess_shell with untrusted YAML commands\n5. No try/except around asyncio.wait_for in run_command_async for process.kill() errors\n\nThese issues make the tool unreliable and potentially unsafe. Should:\n- Replace bare except with specific exception types\n- Add try/except around file I/O\n- Validate agent config schema\n- Consider using shlex.quote or subprocess.run with list args\n- Add proper error handling for timeout scenarios","status":"closed","priority":0,"issue_type":"bug","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-04T19:01:41.820120945+01:00","created_by":"Megatherium","updated_at":"2026-02-04T19:15:47.119142585+01:00","closed_at":"2026-02-04T19:15:47.119142585+01:00","close_reason":"Completed"}
{"id":"reincheck-aqp","title":"Remove redundant imports inside function scopes","description":"Code quality: commands.py imports modules inside functions multiple times:\n- Line 51: get_current_version, compare_versions imported in run_check()\n- Line 120: get_latest_version imported in run_update()  \n- Line 186: get_current_version, compare_versions imported in run_upgrade()\n\nThese are already imported at module level (lines 7-14). The internal imports are redundant and add overhead. Should remove them.","status":"closed","priority":3,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-04T19:01:53.061878941+01:00","created_by":"Megatherium","updated_at":"2026-02-04T19:03:57.873887852+01:00","closed_at":"2026-02-04T19:03:57.873887852+01:00","close_reason":"Implemented: Removed redundant imports inside run_check, run_update, and run_upgrade functions"}
{"id":"reincheck-blv","title":"Add --debug option for better error visibility","description":"Currently getting 'Unknown error' when trying to update agents (e.g. crush). Need to add a --debug option that shows full exception details and provides visibility into what's going wrong.","status":"closed","priority":1,"issue_type":"feature","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-03T21:14:28.152023289+01:00","created_by":"Megatherium","updated_at":"2026-02-03T21:39:19.826870152+01:00","closed_at":"2026-02-03T21:39:19.826870152+01:00","close_reason":"Implemented --debug option that shows detailed command output, status, and error information for troubleshooting"}
{"id":"reincheck-d2z","title":"Refactor: Remove global debug state for better testability","description":"Code smell: _debug_enabled global variable with set_debug()/is_debug() functions makes testing difficult and violates dependency injection principles.\n\nCurrent approach:\n- Global mutable state in __init__.py (line 12)\n- Functions check is_debug() throughout codebase\n\nShould refactor to:\n- Pass debug flag as parameter to functions that need it\n- Or create a context object/state class\n- Makes code more testable and predictable","status":"closed","priority":2,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-04T19:01:53.057925806+01:00","created_by":"Megatherium","updated_at":"2026-02-05T12:05:45.357821027+01:00","closed_at":"2026-02-05T12:05:45.357821027+01:00","close_reason":"Refactored to remove global debug state. All functions now accept explicit debug parameter. Tests updated. All 51 tests pass."}
{"id":"reincheck-e1w","title":"Replace os.system() with subprocess for pager","description":"Security/Cross-platform issue: commands.py uses os.system() to invoke pager (lines 378, 381), which:\n- Less secure than subprocess\n- Not cross-platform compatible\n- Harder to test\n\nShould replace with subprocess.run or similar for better security and cross-platform support.","status":"closed","priority":1,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-04T19:01:53.073916352+01:00","created_by":"Megatherium","updated_at":"2026-02-04T19:21:55.543952878+01:00","closed_at":"2026-02-04T19:21:55.543952878+01:00","close_reason":"Replaced os.system() with subprocess.run() for better security and cross-platform support"}
{"id":"reincheck-ejw","title":"Fix whitespace linting warnings","description":"ruff reports 3 whitespace issues:\n- reincheck/__init__.py:95 - W293 Blank line contains whitespace in load_config docstring\n- reincheck/__init__.py:149 - W293 Blank line contains whitespace in save_config docstring  \n- reincheck/__init__.py:240 - E501 Line too long (95 \u003e 88) in add_github_auth_if_needed docstring\n\nQuick formatting fixes to keep codebase clean.","status":"closed","priority":3,"issue_type":"chore","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-05T12:12:49.257758942+01:00","created_by":"Megatherium","updated_at":"2026-02-05T12:44:18.654426127+01:00","closed_at":"2026-02-05T12:44:18.654426127+01:00","close_reason":"Fixed whitespace issues: removed trailing spaces from line 149, fixed indentation in add_github_auth_if_needed function, and broke long docstring into multiple lines to fit within 88 character limit. All ruff checks now pass."}
{"id":"reincheck-gm5","title":"Add Config schema validation","description":"Reliability: load_config() reads YAML but doesn't validate structure. If YAML is malformed or missing required fields, errors occur later when accessing keys.\n\nShould:\n- Create pydantic model or dataclass for Config/AgentConfig\n- Validate required fields exist\n- Type-check values where appropriate\n- Provide clear error messages about what's missing\n- Makes debugging easier and prevents cryptic KeyErrors later","status":"closed","priority":1,"issue_type":"feature","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-04T19:01:41.842857295+01:00","created_by":"Megatherium","updated_at":"2026-02-04T19:18:16.907455256+01:00","closed_at":"2026-02-04T19:18:16.907455256+01:00","close_reason":"Completed - added dataclasses with validation"}
{"id":"reincheck-hsb","title":"Add logging library for separation of concerns","description":"Code smell: User output (click.echo) and debug output mixed throughout codebase. Makes it hard to:\n- Redirect logs to files\n- Control log levels\n- Separate user-facing from diagnostic output\n\nShould add Python logging module:\n- User messages stay with click.echo\n- Debug info uses logging.debug()\n- Errors use logging.error()\n- Configure handlers for stderr/file output","status":"closed","priority":2,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-04T19:01:53.069972694+01:00","created_by":"Megatherium","updated_at":"2026-02-05T00:59:43.023404707+01:00","closed_at":"2026-02-05T00:59:43.023404707+01:00","close_reason":"Logging system implemented successfully - debug output now uses logging.debug(), user output remains in click.echo, internal errors use logging.error. 41/51 tests pass. Pre-existing test failures unrelated to changes."}
{"id":"reincheck-jqw","title":"Refactor: Split fetch_release_notes into smaller functions","description":"fetch_release_notes() is ~105 lines and handles multiple concerns:\n1. GitHub API fetching (lines 470-512)\n2. External release notes URL handling (lines 515-530)\n3. NPM fallback (lines 532-550)\n4. PyPI fallback (lines 552-566)\n\nEach section could be extracted into a separate helper function:\n- fetch_github_release_notes()\n- fetch_external_release_notes()\n- fetch_npm_fallback()\n- fetch_pypi_fallback()\n\nMain function would just orchestrate and combine results. Improves testability and readability.","status":"closed","priority":3,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-05T12:12:56.117307748+01:00","created_by":"Megatherium","updated_at":"2026-02-05T12:56:09.110185394+01:00","closed_at":"2026-02-05T12:56:09.110185394+01:00","close_reason":"Refactored fetch_release_notes into smaller helper functions for better readability and testability."}
{"id":"reincheck-l3v","title":"Replace subprocess shell commands with safer alternatives","description":"Security improvement: run_command_async() uses asyncio.create_subprocess_shell() which is vulnerable to command injection if agent commands from YAML are malicious.\n\nCurrent issue:\n- Commands run via shell (lines 76-80)\n- No sanitization of command strings\n- YAML could contain malicious commands\n\nShould consider:\n1. Using shlex.quote() to escape arguments\n2. Or use subprocess.run() with list args for safer execution\n3. Validate/whitelist allowed command patterns from YAML\n\nPriority is Medium since YAML is trusted (locally edited), but good security practice.","status":"closed","priority":2,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-04T19:03:48.249931847+01:00","created_by":"Megatherium","updated_at":"2026-02-04T19:26:11.434616035+01:00","closed_at":"2026-02-04T19:26:11.434616035+01:00","close_reason":"Completed - added command safety validation for shell metacharacters"}
{"id":"reincheck-pgy","title":"Add pager validation for security","description":"The release-notes command uses REINCHECK_RN_PAGER environment variable to invoke a pager, but doesn't validate or sanitize it. This could be a security risk if the env var is set to a malicious command.\n\nShould add:\n1. Validation to ensure pager_cmd is a known safe command (cat, less, more, bat, etc.)\n2. Or use shlex.quote() for safer invocation\n3. Consider using a whitelist of allowed pagers\n4. Add error handling if pager command fails","status":"closed","priority":2,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-04T19:21:51.745107118+01:00","created_by":"Megatherium","updated_at":"2026-02-05T02:23:24.766665366+01:00","closed_at":"2026-02-05T02:23:24.766665366+01:00","close_reason":"Completed: Added pager validation with whitelist and error handling"}
{"id":"reincheck-sb4","title":"Extract magic numbers to constants","description":"Maintainability: Multiple hardcoded timeout values scattered across code:\n- run_command_async(): timeout=30 (line 70)\n- upgrade command: timeout=300 (line 163)\n- install command: timeout=600 (line 249)\n\nShould extract to module-level constants for clarity and easier tuning:\nDEFAULT_TIMEOUT = 30\nUPGRADE_TIMEOUT = 300\nINSTALL_TIMEOUT = 600","status":"closed","priority":3,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-04T19:01:53.064577053+01:00","created_by":"Megatherium","updated_at":"2026-02-04T19:03:57.874817466+01:00","closed_at":"2026-02-04T19:03:57.874817466+01:00","close_reason":"Implemented: Extracted DEFAULT_TIMEOUT, UPGRADE_TIMEOUT, INSTALL_TIMEOUT constants and updated all usages"}
{"id":"reincheck-uwu","title":"Make file I/O operations atomic","description":"Reliability: save_config() and load_config() have potential race conditions:\n- check file exists then open (not atomic)\n- write to file directly without temp file\n\nShould:\n- Use atomic write pattern: write to temp file, then atomic rename\n- Use Path.rename() which is atomic on POSIX systems\n- Prevents corrupted config if process crashes during write\n\nAlso applies to release_notes file writes in commands.py.","status":"closed","priority":2,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-04T19:03:48.252628656+01:00","created_by":"Megatherium","updated_at":"2026-02-04T19:22:33.875903731+01:00","closed_at":"2026-02-04T19:22:33.875903731+01:00","close_reason":"Completed - implemented atomic file writes using temp files"}
{"id":"reincheck-x5l","title":"Consolidate duplicate agent filtering logic","description":"Code duplication: Agent filtering by name repeated in 3 places:\n- run_check() line 41-45\n- run_update() line 108-112  \n- run_upgrade() line 177-181\n\nShould extract to helper function: filter_agent_by_name(agents: list[AgentConfig], name: str) -\u003e list[AgentConfig] to reduce duplication and make error handling consistent.","status":"closed","priority":2,"issue_type":"task","owner":"852741+Megatherium@users.noreply.github.com","created_at":"2026-02-04T19:01:53.086878576+01:00","created_by":"Megatherium","updated_at":"2026-02-04T19:03:57.869390596+01:00","closed_at":"2026-02-04T19:03:57.869390596+01:00","close_reason":"Implemented: Created filter_agent_by_name() helper function and used it in 4 places"}
